/****************************************************************************************************************************************************************
** 版权:          2017-2027,深圳市信为科技发展有限公司
** 文件名:        stm32l0_usart_app.h
** 作者:          庄明群
** 版本:          V1.0.0
** 日期:          2017-04-28
** 描述:          串口通信
** 功能:          串口初始化、串口数据收发、中断处理
*****************************************************************************************************************************************************************
** 修改者:        No
** 版本:          No
** 修改内容:      No
** 日期:          No
****************************************************************************************************************************************************************/

#ifndef __STM32L0_USART_APP_H
#define __STM32L0_USART_APP_H

#include "stm32l0_usart.h"

extern UsartParaTypeDef UsartParam;
extern ProductParaTypeDef ProductParam;

//串口最大缓存长度
#define USART1_MAX_DATALEN                           120                                                                  
//冻结设备
#define FREEZE_ENABLE                                0x0F
//解冻设备
#define FREEZE_DISABLE                               0x00
//RS485 发送
#define TX_ON(Gpiox, Gpio_Pin)                       HAL_GPIO_WritePin(Gpiox, Gpio_Pin, GPIO_PIN_SET)
//RS485 接收
#define TX_OFF(Gpiox, Gpio_Pin)                      HAL_GPIO_WritePin(Gpiox, Gpio_Pin, GPIO_PIN_RESET)

//***************************************************************************************************************************************************************
// 名称               : gUart1_Config()
// 创建日期           : 2017-04-28
// 作者        	      : 庄明群
// 功能               : 串口1基本通信参数配置
// 输入参数           : 无
// 输出参数           : 无
// 返回结果           : 无
// 注意和说明         : 参数的配置通过全局变量完成
// 修改内容           :
//***************************************************************************************************************************************************************

void gUart1_Config(void);

//***************************************************************************************************************************************************************
// 名称               : HAL_UART_RxCpltCallback()
// 创建日期           : 2017-04-28
// 作者        	      : 庄明群
// 功能               : 串口接收回调函数
// 输入参数           : UART_HandleTypeDef结构体
// 输出参数           : 无
// 返回结果           : 无
// 注意和说明         :
// 修改内容           :
//***************************************************************************************************************************************************************

void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart);

//***************************************************************************************************************************************************************
// 名称               : HAL_UART_TxCpltCallback()
// 创建日期           : 2017-04-28
// 作者        	      : 庄明群
// 功能               : 串口发送回调函数
// 输入参数           : UART_HandleTypeDef结构体
// 输出参数           : 无
// 返回结果           : 无
// 注意和说明         :
// 修改内容           :
//***************************************************************************************************************************************************************

void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart);

//***************************************************************************************************************************************************************
// 名称               : UART1_ISR_Handle()
// 创建日期           : 2017-05-05
// 作者        	      : 庄明群
// 功能               : 串口中断服务子程序
// 输入参数           : 无
// 输出参数           : 无
// 返回结果           : 无
// 注意和说明         :
// 修改内容           :
//***************************************************************************************************************************************************************
void UART1_ISR_Handle(void);

uint32_t UART1_SendData(uint8_t *buf, uint32_t len);
void uprintf(const char *fmt,...);

#endif
